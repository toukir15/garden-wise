(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[247],{93080:function(e,t,s){Promise.resolve().then(s.bind(s,80336)),Promise.resolve().then(s.bind(s,75293))},80336:function(e,t,s){"use strict";s.d(t,{default:function(){return w}});var l=s(57437),n=s(66648),a=s(39343),i=s(76208),d=s(90595),o=s(583),r=s(95256),c=s(81887),u=s(47971),v=s(82336),x=s(28352),m=s(8127),h=s(8030),p=s(57818);s(18416);var f=s(2265),g=JSON.parse('[{"id":1,"label":"Vegetables","value":"vegetables"},{"id":2,"label":"Flowers","value":"flowers"},{"id":3,"label":"Herbs","value":"herbs"},{"id":4,"label":"Fruits","value":"fruits"},{"id":5,"label":"Shrubs","value":"shrubs"},{"id":6,"label":"Trees","value":"trees"},{"id":7,"label":"Succulents","value":"succulents"},{"id":8,"label":"Indoor Plants","value":"indoor_plants"},{"id":9,"label":"Outdoor Plants","value":"outdoor_plants"},{"id":10,"label":"Landscaping","value":"landscaping"},{"id":11,"label":"Soil & Fertilizers","value":"soil_fertilizers"},{"id":12,"label":"Composting","value":"composting"},{"id":13,"label":"Garden Design","value":"garden_design"},{"id":14,"label":"Plant Diseases & Pests","value":"plant_diseases_pests"},{"id":15,"label":"Watering & Irrigation","value":"watering_irrigation"},{"id":16,"label":"Pruning & Trimming","value":"pruning_trimming"},{"id":17,"label":"Container Gardening","value":"container_gardening"},{"id":18,"label":"Seasonal Gardening (Spring, Summer, Fall, Winter)","value":"seasonal_gardening"},{"id":19,"label":"Greenhouses","value":"greenhouses"},{"id":20,"label":"Organic Gardening","value":"organic_gardening"}]'),j=s(58823),b=s(78460),A=s(41942);let N=(0,p.default)(()=>Promise.resolve().then(s.t.bind(s,98436,23)),{loadableGenerated:{webpack:()=>[98436]},ssr:!1});function w(){let{isOpen:e,onOpen:t,onOpenChange:s}=(0,i.q)(),[p,w]=(0,f.useState)(""),[y,_]=(0,f.useState)([]),[S,C]=(0,f.useState)([]),{mutate:k}=(0,b.fj)(),{register:E,handleSubmit:D,watch:I,formState:{errors:F}}=(0,a.cI)(),P=e=>{let t=Array.from(e.target.files||[]);Promise.all(t.map(e=>{let t=new FileReader;return new Promise(s=>{t.onload=()=>s(t.result),t.readAsDataURL(e)})})).then(e=>{_(e=>[...e,...t]),C(t=>[...t,...e])})};return(0,l.jsxs)("div",{className:"w-full border-b h-fit border-gray-700 py-4 ",children:[(0,l.jsxs)("div",{className:"flex gap-3 items-center px-4",children:[(0,l.jsx)(n.default,{alt:"Profile image",className:"rounded-full",src:j.default,height:40,width:40}),(0,l.jsx)(v.A,{className:"p-5 rounded-full text-sm w-full cursor-pointer flex justify-start bg-[#121212]",onPress:t,children:(0,l.jsx)("input",{disabled:!0,placeholder:"What's on your mind?",className:"bg-[#121212]",type:"text"})})]}),(0,l.jsx)(d.R,{className:"bg-[#121212]",isOpen:e,size:"2xl",onOpenChange:s,children:(0,l.jsx)("form",{onSubmit:D(e=>{let t=new FormData;t.append("data",JSON.stringify({...e,description:p})),y.forEach(e=>{t.append("file",e)}),k(t)}),children:(0,l.jsx)(o.A,{className:"absolute top-8 -translate-x-9",children:e=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.k,{className:"flex text-center flex-col gap-1 border-b border-gray-600",children:"Create post"}),(0,l.jsxs)(c.I,{children:[(0,l.jsx)(x.g,{...E("category"),size:"sm",items:g,label:"Select a category",className:"mt-3",variant:"bordered",children:e=>(0,l.jsx)(m.R,{children:e.label},e.label)}),(0,l.jsxs)("label",{className:"border py-2 px-4 text-center w-fit flex items-center gap-2 text-sm rounded-full mt-2 border-green-500 text-green-500",htmlFor:"addImage",children:[(0,l.jsx)("span",{children:(0,l.jsx)(A.Ms2,{})}),(0,l.jsx)("span",{children:"Add Images"})]}),(0,l.jsx)("input",{type:"file",onChange:P,id:"addImage",className:"hidden",multiple:!0}),S.length>0&&(0,l.jsx)("div",{className:"flex flex-col md:flex-row w-full md:items-center mb-2 ",children:(0,l.jsx)("div",{className:"flex w-full flex-wrap gap-3",children:S.map((e,t)=>(0,l.jsx)("div",{className:"h-28 w-28 border border-dashed p-2",children:(0,l.jsx)("img",{className:"w-full h-full",alt:"preview",src:e})},t))})}),(0,l.jsx)("div",{className:"mt-3",children:(0,l.jsx)(N,{placeholder:"Add a description...",className:"text-white custom-quill",value:p,onChange:w,style:{height:"100px"}})}),(0,l.jsx)(h.K,{...E("premium"),defaultSelected:!1,size:"md",className:"mt-10",children:"Premium"})]}),(0,l.jsx)(u.R,{children:(0,l.jsx)(v.A,{className:"bg-green-500 py-2 font-medium rounded-full w-full",type:"submit",onPress:e,children:"Post"})})]})})})})]})}},75293:function(e,t,s){"use strict";s.d(t,{default:function(){return ee}});var l=s(57437),n=s(41942),a=s(69824),i=s(58823),d=s(2265),o=s(63872),r=s(66648),c=s(62737),u=s.n(c),v=s(51470),x=s.n(v);s(53757);var m=s(31394);function h(e){let{images:t}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(m.Z,{elementClassNames:"grid ".concat(1===t.length?"grid-cols-1":"grid-cols-2"," gap-1"),mode:"lg-fade",children:t.map((e,s)=>(0,l.jsxs)("a",{className:"relative h-full ".concat(3===t.length&&0===s?"row-span-2":"row-span-1"," ").concat(s>=4?"hidden lg:block":""),href:"string"==typeof e?e:e.src,children:[(0,l.jsx)(r.default,{src:e,height:500,width:500,className:"h-full object-cover\n\n                                 ".concat(1==t.length&&"rounded-xl"," \n\n                                 ").concat(2==t.length&&"".concat(0==s&&"rounded-s-md"," ").concat(1==s&&"rounded-e-md"," }")," \n\n                                 ").concat(3==t.length&&"".concat(0==s&&"rounded-s-xl"," ").concat(1==s&&"rounded-tr-md"," ").concat(2==s&&"rounded-br-xl")," \n\n                                 ").concat(t.length>3&&"".concat(0==s&&"rounded-tl-xl"," ").concat(1==s&&"rounded-tr-md"," ").concat(2==s&&"rounded-bl-xl"," ").concat(3==s&&"rounded-br-xl")," \n\n                                 ").concat(s>3&&"hidden"," "),alt:"Image ".concat(s+1)}),3===s&&t.length>4&&(0,l.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center text-white text-xl",children:["+",t.length-4," more"]})]},s))})})}var p=s(54008),f=s(76208),g=s(37874),j=s(54158),b=s(2428),A=s(82336),N=s(90595),w=s(583),y=s(95256),_=s(81887),S=s(47971),C=s(78460),k=s(63939);let E="http://localhost:5000/api/v1",D=async()=>{let e=await fetch("".concat(E,"/posts"),{next:{tags:["posts"]}});return await e.json()},I=async e=>{let t=await fetch("".concat(E,"/posts/").concat(e),{next:{tags:["post"]}});return await t.json()},F=()=>(0,k.a)(["posts"],D),P=e=>(0,k.a)(["post",e],()=>I(e));var Q=s(85097),L=s(39343),M=s(27079),z=s(89565);s(74590);var O=s(58064);(0,O.$)("08cc5119732697a263d299210110a09948af19f2");var B=(0,O.$)("27b5e9d74b9787f45dcc02c180f1a97bd1742a40"),G=(0,O.$)("6d6f1dd14436ba216232ab6e0606c9b9dc703906"),R=(0,O.$)("aa50785d4f07365b6b5c70f78f236eb806c418e0");let T=()=>{let e=(0,M.NL)();return(0,z.D)({mutationFn:async e=>{let{voteId:t,postId:s,userId:l,commentId:n}=e;return await B(t)},onMutate:async t=>{let{voteId:s,postId:l,userId:n,commentId:a,replyId:i}=t;await e.cancelQueries(["post",l]),e.getQueryData(["post",l]),e.setQueryData(["post",l],e=>{if(!e)return e;let t=e.data,s=e=>{var t;let s=e.votes.upvote,l=null===(t=e.votes)||void 0===t?void 0:t.downvote;l.includes(n)&&(e.votes.downvote=l.filter(e=>e!==n)),s.includes(n)?e.votes.upvote=s.filter(e=>e!==n):e.votes.upvote.push(n)};if(t.isShared){s(t);let e=t.comments.find(e=>(null==e?void 0:e._id)===a);e&&s(i?e.replies.find(e=>(null==e?void 0:e._id)===i):e)}else{let e=t.post.comments.find(e=>(null==e?void 0:e._id)===a);e&&s(i?e.replies.find(e=>(null==e?void 0:e._id)===i):e)}return e})}})},$=()=>{let e=(0,M.NL)();return(0,z.D)({mutationFn:async e=>{let{voteId:t}=e;return await G(t)},onMutate:async t=>{let{voteId:s,postId:l,userId:n,commentId:a,replyId:i}=t;await e.cancelQueries(["post",l]);let d=e.getQueryData(["post",l]);return e.setQueryData(["post",l],e=>{if(!e)return e;let t=e.data,s=e=>{let t=e.votes.upvote,s=e.votes.downvote;t.includes(n)&&(e.votes.upvote=t.filter(e=>e!==n)),s.includes(n)?e.votes.downvote=s.filter(e=>e!==n):e.votes.downvote.push(n)};if(t.isShared){s(t);let e=t.comments.find(e=>(null==e?void 0:e._id)===a);e&&s(i?e.replies.find(e=>(null==e?void 0:e._id)===i):e)}else{let e=t.post.comments.find(e=>(null==e?void 0:e._id)===a);e&&s(i?e.replies.find(e=>(null==e?void 0:e._id)===i):e)}return e}),{previousPost:d}}})},K=()=>{let e=(0,M.NL)();return(0,z.D)({mutationFn:async e=>{let{postId:t,text:s}=e;return await R(t,s)},onSuccess:(t,s)=>{let{postId:l,text:n,user:a}=s,i=new Date().toISOString(),d={_id:t.data._id,text:n,replies:[],user:{_id:null==a?void 0:a._id,name:null==a?void 0:a.name,profilePhoto:null==a?void 0:a.profilePhoto},votes:{_id:t.data.votes,upvote:[],downvote:[]},createdAt:i};e.setQueryData(["post",l],e=>{if(!e)return e;let t={...e.data};return t.isShared?t.comments=[...t.comments,d]:t.post={...t.post,comments:[...t.post.comments,d]},console.log(t),{...e,data:t}})}})};var U=s(97903);function W(e){let{postId:t}=e,{user:s}=(0,U.a)(),{mutate:n}=K(),{register:a,handleSubmit:d,reset:o}=(0,L.cI)();return(0,l.jsxs)("form",{onSubmit:d(e=>{n({postId:t,text:e.text,user:s}),o()}),className:"flex items-center border-t border-gray-600 ",children:[(0,l.jsx)("div",{className:"px-2",children:(0,l.jsx)(r.default,{className:" rounded-full",height:30,width:30,src:i.default,alt:""})}),(0,l.jsx)("input",{...a("text"),type:"text",id:"comment",className:"w-full mt-1 outline-none  py-3  text-sm comment_ploaceholder",placeholder:"Write a comment..."}),(0,l.jsx)("button",{className:" text-xl text-green-500 hover:text-green-600 bg-[#1D1C1C] py-[17px] pr-3 pl-4 transition duration-200",children:(0,l.jsx)(Q.yhK,{})})]})}u().extend(x());let H=e=>{let t=u()().diff(e,"second");if(t<60)return"".concat(t,"s");let s=u()().diff(e,"minute");if(s<60)return"".concat(s,"m");let l=u()().diff(e,"hour");if(l<24)return"".concat(l,"h");let n=u()().diff(e,"day");if(n<7)return"".concat(n,"d");let a=u()().diff(e,"week");if(a<52)return"".concat(a,"w");let i=u()().diff(e,"year");return"".concat(i,"y")};function J(e){let{postId:t}=e,[s,n]=(0,d.useState)(""),[a,c]=(0,d.useState)(""),{data:v,isLoading:x,error:m}=P(t),{mutate:h}=T(),{mutate:p}=$(),{user:f}=(0,U.a)(),g=null==f?void 0:f._id,j=(e,t,s)=>{h({voteId:e,postId:t,userId:g,commentId:s})},b=(e,t,s)=>{p({voteId:e,postId:t,userId:g,commentId:s})},{register:A,handleSubmit:N,watch:w,formState:{errors:y}}=(0,L.cI)();return(0,l.jsxs)(l.Fragment,{children:[(null==v?void 0:v.data.isShared)&&(0,l.jsx)("div",{className:"h-[450px] overflow-y-auto comment_scroll",children:null==v?void 0:v.data.comments.map(e=>{var t,s,n,a,d;let c=null===(t=e.votes)||void 0===t?void 0:t.upvote.includes(g),x=null===(s=e.votes)||void 0===s?void 0:s.downvote.includes(g);return(0,l.jsxs)("div",{className:"flex my-2",children:[(0,l.jsx)("div",{className:" pr-2  mt-2 shrink-0 ",children:(0,l.jsx)(r.default,{className:" rounded-full",height:25,width:25,src:i.default,alt:"user image"})}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:" bg-[#1d1c1c] py-1 px-2 rounded",children:[(0,l.jsx)("p",{children:(0,l.jsx)("span",{className:"font-semibold  text-sm",children:null===(n=e.user)||void 0===n?void 0:n.name})}),(0,l.jsx)("p",{className:"mb-1 text-gray-400 leading-[1.3] text-sm",children:e.text})]}),(0,l.jsxs)("div",{className:"flex justify-between mt-1 text-sm font-medium text-gray-300 ml-3",children:[(0,l.jsxs)("div",{className:"flex gap-5",children:[(0,l.jsx)("span",{children:H(u()(e.createdAt))}),(0,l.jsxs)("button",{onClick:()=>{var t,s;j(null===(t=e.votes)||void 0===t?void 0:t._id,null===(s=v.data)||void 0===s?void 0:s._id,null==e?void 0:e._id)},className:"flex gap-[2px] ".concat(c?"text-green-500":""," "),children:[(0,l.jsx)(o.vrL,{className:"text-[15px]"}),(0,l.jsx)("p",{children:(null===(a=e.votes)||void 0===a?void 0:a.upvote.length)||0})]}),(0,l.jsx)("button",{onClick:()=>{var t,s;b(null===(t=e.votes)||void 0===t?void 0:t._id,null===(s=v.data)||void 0===s?void 0:s._id,null==e?void 0:e._id)},children:(0,l.jsxs)("div",{className:"flex items-center gap-[2px]",children:[(0,l.jsx)(o.krz,{className:"flex gap-[2px] ".concat(x?"text-green-500":""," ")}),(0,l.jsx)("p",{children:(null===(d=e.votes)||void 0===d?void 0:d.downvote.length)||0})]})})]}),(0,l.jsx)("div",{className:"hiden"})]})]})]},null==e?void 0:e._id)})}),!(null==v?void 0:v.data.isShared)&&(0,l.jsx)("div",{className:"h-[450px] overflow-y-auto comment_scroll",children:null==v?void 0:v.data.post.comments.map(e=>{var t,s;let n=e.votes.upvote.includes(g),a=null===(t=e.votes)||void 0===t?void 0:t.downvote.includes(g);return(0,l.jsxs)("div",{className:"flex my-2",children:[(0,l.jsx)("div",{className:" pr-2  mt-2 shrink-0 ",children:(0,l.jsx)(r.default,{className:" rounded-full",height:25,width:25,src:i.default,alt:"user image"})}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:" bg-[#1d1c1c] py-1 px-2 rounded",children:[(0,l.jsx)("p",{children:(0,l.jsx)("span",{className:"font-semibold  text-sm",children:null===(s=e.user)||void 0===s?void 0:s.name})}),(0,l.jsx)("p",{className:"mb-1 text-gray-400 leading-[1.3] text-sm",children:e.text})]}),(0,l.jsxs)("div",{className:"flex justify-between mt-1 text-sm font-medium text-gray-300 ml-3",children:[(0,l.jsxs)("div",{className:"flex gap-5",children:[(0,l.jsx)("span",{children:H(u()(e.createdAt))}),(0,l.jsxs)("button",{onClick:()=>{var t,s;j(null===(t=e.votes)||void 0===t?void 0:t._id,null===(s=v.data)||void 0===s?void 0:s._id,null==e?void 0:e._id)},className:"flex gap-[2px] ".concat(n?"text-green-500":""," "),children:[(0,l.jsx)(o.vrL,{className:"text-[15px]"}),(0,l.jsx)("p",{children:e.votes.upvote.length})]}),(0,l.jsx)("button",{onClick:()=>{var t,s;b(null===(t=e.votes)||void 0===t?void 0:t._id,null===(s=v.data)||void 0===s?void 0:s._id,null==e?void 0:e._id)},children:(0,l.jsxs)("div",{className:"flex items-center gap-[2px]",children:[(0,l.jsx)(o.krz,{className:"flex gap-[2px] ".concat(a?"text-green-500":""," ")}),(0,l.jsx)("p",{children:e.votes.downvote.length})]})})]}),(0,l.jsx)("div",{className:"hiden"})]})]})]},null==e?void 0:e._id)})})]})}function q(e){let{postId:t,setIsOpenComment:s,setOpenSharedComment:n}=e;return(0,l.jsx)("div",{onClick:()=>{s(!1),n(!1)},className:"fixed top-0 left-0 w-screen h-screen bg-[#000000ba] z-50 ",children:(0,l.jsx)("div",{onClick:e=>e.stopPropagation(),className:"w-[95%] md:w-[600px] lg:w-[660px] bg-[#121212] rounded-md absolute right-[52%] translate-x-1/2 top-[18%] md:top-[12%] flex flex-col justify-between ",children:(0,l.jsxs)("div",{className:"",children:[(0,l.jsxs)("div",{className:"relative flex justify-center items-center py-3 px-2 border-b border-gray-600",children:[(0,l.jsx)("h3",{className:"text-xl",children:"Comments"}),(0,l.jsx)("button",{type:"button",className:" text-2xl absolute top-[10px] right-2 hover:bg-[#2d2a2a] p-1 rounded-full transition duration-150",onClick:()=>{s(!1),n(!1)},children:(0,l.jsx)(Q.bjh,{})})]}),(0,l.jsx)("div",{className:"px-3",children:(0,l.jsx)(J,{postId:t})}),(0,l.jsx)("div",{children:(0,l.jsx)(W,{postId:t})})]})})})}u().extend(x()),u().extend(x());let V=(e,t,s,l)=>{var n;let a=e?null==t?void 0:t.votes[l]:null==t?void 0:null===(n=t.post)||void 0===n?void 0:n.votes[l];return null==a?void 0:a.find(e=>e===s)};var Y=s(98436),Z=s.n(Y);u().extend(x());let X=[{key:"copy",label:"Copy"},{key:"edit",label:"Edit"},{key:"delete",label:"Delete"}];function ee(){var e;let{user:t}=(0,U.a)(),[s,c]=(0,d.useState)(""),v=(0,d.useRef)(null),[x,m]=(0,d.useState)(!1),[k,E]=(0,d.useState)(!1),[D,I]=(0,d.useState)(!1),{isOpen:P,onOpen:Q,onOpenChange:L}=(0,f.q)(),[M,z]=(0,d.useState)(""),{data:O,isLoading:B,error:G}=F(),R=null==t?void 0:t._id,T=()=>m(e=>!e);(0,d.useEffect)(()=>{let e=e=>{v.current&&!(e.target instanceof Node&&v.current.contains(e.target))&&m(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let{mutate:$}=(0,C.Tz)(),K=(e,t)=>{$({voteId:e,postId:t,userId:R})},{mutate:W}=(0,C.bt)(),H=(e,t)=>{W({voteId:e,postId:t,userId:R})},{mutate:J}=(0,C.hn)();return(0,l.jsxs)("div",{children:[null==O?void 0:null===(e=O.data)||void 0===e?void 0:e.map((e,t)=>{var d,m,f,N,w,y,_,S,C,k,D,F,P,L,M,z,O,B,G;let $=e.post.images||[],U=V(e.isShared,e,R,"upvote"),W=V(e.isShared,e,R,"downvote");return(0,l.jsxs)("div",{children:[!e.isShared&&(0,l.jsxs)("div",{className:"my-4 shadow-md border-b border-gray-600",ref:v,children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("button",{className:"flex gap-2 items-center p-2 cursor-pointer w-fit",children:[(0,l.jsx)(r.default,{className:" rounded-full",height:45,width:45,src:i.default,alt:""}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium",children:null===(d=e.post.user)||void 0===d?void 0:d.name}),(0,l.jsx)("p",{className:"text-sm text-start text-green-500",children:u()(null==e?void 0:e.createdAt).fromNow()})]})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("button",{onClick:()=>{T(),c(null==e?void 0:e._id)},className:"mr-8 relative",children:(0,l.jsx)(p.JEI,{className:"text-[20px] hover:text-green-500 transition duration-150"})}),x&&s==(null==e?void 0:e._id)&&(0,l.jsx)("div",{className:"rounded bg-white shadow-sm z-50 w-40 absolute flex flex-col -left-[170px]",children:(0,l.jsx)(g.F,{children:[(0,l.jsx)(j.a,{"aria-label":"Dynamic Actions",items:X,children:e=>(0,l.jsx)(b.W,{color:"delete"===e.key?"danger":"default",className:"delete"===e.key?"text-danger":"",children:e.label},e.key)},"dropdown-menu")]})})]})]}),(0,l.jsx)("div",{className:"mx-4 text-gray-400 break-words",children:(0,l.jsx)("div",{dangerouslySetInnerHTML:{__html:e.post.description||""}})}),(0,l.jsxs)("div",{className:"w-[80%] mx-auto ",children:[(0,l.jsx)("div",{className:"flex justify-center pt-4 pb-2",children:(0,l.jsx)("div",{className:"flex justify-center gap-1 pt-4 pb-2",children:(0,l.jsx)(h,{images:$})})}),(0,l.jsxs)("div",{className:"flex justify-between mt-4 px-4 pb-4",children:[(0,l.jsxs)("button",{onClick:()=>{var t;K(null===(t=e.post.votes)||void 0===t?void 0:t._id,null==e?void 0:e._id)},className:" ".concat(U?"text-green-500":"hover:text-gray-400","  flex items-center  transition duration-150"),children:[(0,l.jsx)(o.vrL,{className:"text-[20px]"}),(0,l.jsx)("p",{children:(null===(N=e.post)||void 0===N?void 0:null===(f=N.votes)||void 0===f?void 0:null===(m=f.upvote)||void 0===m?void 0:m.length)?null===(w=e.post.votes.upvote)||void 0===w?void 0:w.length:0})]}),(0,l.jsxs)("button",{onClick:()=>{var t;H(null===(t=e.post.votes)||void 0===t?void 0:t._id,null==e?void 0:e._id)},className:" ".concat(W?"text-green-500":"hover:text-gray-400","  flex items-center  transition duration-150"),children:[(0,l.jsx)(o.krz,{className:"text-[20px]"}),(0,l.jsx)("p",{children:(null===(S=e.post)||void 0===S?void 0:null===(_=S.votes)||void 0===_?void 0:null===(y=_.downvote)||void 0===y?void 0:y.length)?null===(C=e.post.votes.downvote)||void 0===C?void 0:C.length:0})]}),(0,l.jsxs)("button",{onClick:()=>{c(null==e?void 0:e._id),E(!0),I(!1)},className:"flex items-center gap-1 hover:text-gray-400 transition duration-150",children:[(0,l.jsx)(n.DCG,{}),(0,l.jsx)("p",{children:(null===(D=e.post)||void 0===D?void 0:null===(k=D.comments)||void 0===k?void 0:k.length)?null===(P=e.post)||void 0===P?void 0:null===(F=P.comments)||void 0===F?void 0:F.length:0})]}),(0,l.jsx)(A.A,{onClick:()=>c(e._id),onPress:Q,className:"flex bg-black items-center gap-1 hover:text-gray-400 transition duration-150",children:(0,l.jsx)(a.qSo,{className:"text-2xl text-txt-200"})})]})]})]}),e.isShared&&(0,l.jsx)("div",{className:"mt-4 shadow-md border-b border-gray-600",children:(0,l.jsxs)("div",{children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("button",{className:"flex gap-2 items-center p-2 cursor-pointer w-fit text-start",children:[(0,l.jsx)(r.default,{className:" rounded-full",height:45,width:45,src:i.default,alt:""}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium",children:null===(L=e.sharedUser)||void 0===L?void 0:L.name}),(0,l.jsx)("p",{className:"text-sm text-green-500",children:u()(e.createdAt).fromNow()})]})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("button",{onClick:()=>{T(),c(null==e?void 0:e._id)},className:"mr-8 relative",children:(0,l.jsx)(p.JEI,{className:"text-[20px] hover:text-green-500 transition duration-150"})}),x&&s==(null==e?void 0:e._id)&&(0,l.jsx)("div",{className:"rounded bg-white shadow-sm z-50 w-40 absolute flex flex-col -left-[170px]",children:(0,l.jsx)(g.F,{children:[(0,l.jsx)(j.a,{"aria-label":"Dynamic Actions",items:X,children:e=>(0,l.jsx)(b.W,{color:"delete"===e.key?"danger":"default",className:"delete"===e.key?"text-danger":"",children:e.label},e.key)},"dropdown-menu")]})})]})]}),(0,l.jsx)("div",{className:"pl-4",children:(0,l.jsx)("div",{dangerouslySetInnerHTML:{__html:e.description||""}})})]}),(0,l.jsxs)("div",{className:"",children:[(0,l.jsxs)("div",{className:"mx-6 border border-gray-600 p-2 mt-2 rounded-lg",children:[(0,l.jsxs)("button",{className:" text-start flex gap-2 items-center p-2 cursor-pointer w-fit ",children:[(0,l.jsx)(r.default,{className:" rounded-full",height:40,width:40,src:i.default,alt:""}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium",children:null===(M=e.post.user)||void 0===M?void 0:M.name}),(0,l.jsx)("p",{className:"text-sm text-green-500",children:u()(e.post.createdAt).fromNow()})]})]}),(0,l.jsx)("div",{className:"pl-4",children:(0,l.jsx)("div",{dangerouslySetInnerHTML:{__html:e.post.description||""}})}),(0,l.jsx)("div",{className:"flex w-[90%] mx-auto justify-center pt-4 pb-8",children:(0,l.jsx)(h,{images:$})})]}),(0,l.jsxs)("div",{className:"flex justify-between mt-4 px-16 pb-4",children:[(0,l.jsxs)("button",{onClick:()=>{var t;K(null===(t=e.votes)||void 0===t?void 0:t._id,null==e?void 0:e._id)},className:" ".concat(U?"text-green-500":"hover:text-gray-400","  flex items-center  transition duration-150"),children:[(0,l.jsx)(o.vrL,{className:"text-[20px] "}),(0,l.jsx)("p",{children:e.votes.upvote.length?e.votes.upvote.length:0})]}),(0,l.jsxs)("button",{onClick:()=>{var t;H(null===(t=e.votes)||void 0===t?void 0:t._id,null==e?void 0:e._id)},className:" ".concat(W?"text-green-500":"hover:text-gray-400","  flex items-center  transition duration-150"),children:[(0,l.jsx)(o.krz,{className:"text-[20px]"}),(0,l.jsx)("p",{children:(null===(z=e.votes)||void 0===z?void 0:z.downvote.length)?null===(O=e.votes)||void 0===O?void 0:O.downvote.length:0})]}),(0,l.jsxs)("button",{onClick:()=>{c(null==e?void 0:e._id),E(!1),I(!0)},className:"flex items-center gap-1 hover:text-gray-400 transition duration-150",children:[(0,l.jsx)(n.DCG,{className:"text-txt-200"}),(0,l.jsx)("p",{children:(null==e?void 0:null===(B=e.comments)||void 0===B?void 0:B.length)?null==e?void 0:null===(G=e.comments)||void 0===G?void 0:G.length:0})]}),(0,l.jsx)(A.A,{onClick:()=>c(e._id),onPress:Q,className:"flex bg-black items-center gap-1 hover:text-gray-400 transition duration-150",children:(0,l.jsx)(a.qSo,{className:"text-2xl text-txt-200"})})]})]})]})},t)]},t)}),(0,l.jsx)(N.R,{className:"bg-[#121212]",isOpen:P,size:"2xl",onOpenChange:L,children:(0,l.jsx)("form",{onSubmit:e=>{e.preventDefault(),J({description:M,postId:s})},children:(0,l.jsx)(w.A,{className:"absolute top-8 -translate-x-9",children:e=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(y.k,{className:"flex text-center flex-col gap-1 border-b border-gray-600",children:"Create post"}),(0,l.jsx)(_.I,{children:(0,l.jsx)("div",{className:"mt-3",children:(0,l.jsx)(Z(),{placeholder:"Add a description...",className:"text-white custom-quill",value:M,onChange:z,style:{height:"150px"}})})}),(0,l.jsx)(S.R,{children:(0,l.jsx)(A.A,{className:"bg-green-500 py-2 mt-10 font-medium rounded-full w-full",type:"submit",onPress:e,children:"Share"})})]})})})}),(k||D)&&(0,l.jsx)(q,{postId:s,setOpenSharedComment:I,setIsOpenComment:E})]})}},97903:function(e,t,s){"use strict";s.d(t,{a:function(){return d}});var l=s(57437),n=s(2265),a=s(90157);let i=(0,n.createContext)(void 0),d=()=>{let e=(0,n.useContext)(i);if(void 0===e)throw Error("useUser must be use whithin the user provider context");return e};t.Z=e=>{let{children:t}=e,[s,d]=(0,n.useState)(null),[o,r]=(0,n.useState)(!1),c=async()=>{d(await (0,a.ts)())};return(0,n.useEffect)(()=>{c()},[]),(0,l.jsx)(i.Provider,{value:{user:s,setUser:d,isLoading:o,setIsLoading:r},children:t})}},78460:function(e,t,s){"use strict";s.d(t,{fj:function(){return u},bt:function(){return m},hn:function(){return v},Tz:function(){return x}});var l=s(89565),n=s(27079);s(74590);var a=s(58064),i=(0,a.$)("96a222b5b8fc0436db2ef3e2e3fd9c2a9880afe1"),d=(0,a.$)("e55e197f1226b25635ffbca4ba42b65acc0c0d15"),o=(0,a.$)("d1d8dcf0f2366321c0264f5630f24781aa76e570"),r=(0,a.$)("4355ec6171bd1fbeb3f7ef6fd1c61b5a975aa0de"),c=s(27776);let u=()=>(0,l.D)({mutationKey:["POST"],mutationFn:async e=>await d(e),onMutate:()=>({toastId:c.Am.loading("Creating post...",{duration:1/0,position:"top-right"})}),onSuccess:(e,t,s)=>{c.Am.success("Post created successfully!",{id:null==s?void 0:s.toastId,duration:2e3})},onError:(e,t,s)=>{c.Am.error("Failed to create post. Please try again.",{id:null==s?void 0:s.toastId,duration:2e3})}}),v=()=>(0,l.D)({mutationKey:["POST"],mutationFn:async e=>{let{description:t,postId:s}=e;return await o(t,s)},onMutate:()=>({toastId:c.Am.loading("Sharing post...",{duration:1/0,position:"top-right"})}),onSuccess:(e,t,s)=>{c.Am.success("Shared post successfully!",{id:null==s?void 0:s.toastId,duration:2e3})},onError:(e,t,s)=>{c.Am.error("Failed to share post. Please try again.",{id:null==s?void 0:s.toastId,duration:2e3})}}),x=()=>{let e=(0,n.NL)();return(0,l.D)({mutationFn:async e=>{let{voteId:t,postId:s,userId:l}=e;return await r(t)},onMutate:async t=>{let{voteId:s,postId:l,userId:n}=t;await e.cancelQueries(["posts"]);let a=e.getQueryData(["posts"]);return e.setQueryData(["posts"],e=>{if(!e)return e;let t=e.data.find(e=>(null==e?void 0:e._id)===l);if(t.isShared){var s;let e=t.votes.upvote,l=null===(s=t.votes)||void 0===s?void 0:s.downvote;l.includes(n)&&(t.votes.downvote=l.filter(e=>e!==n)),e.includes(n)?t.votes.upvote=e.filter(e=>e!==n):t.votes.upvote.push(n)}else{let e=t.post.votes.upvote,s=t.post.votes.downvote;s.includes(n)&&(t.post.votes.downvote=s.filter(e=>e!==n)),e.includes(n)?t.post.votes.upvote=e.filter(e=>e!==n):t.post.votes.upvote.push(n)}return e}),{previousPosts:a}}})},m=()=>{let e=(0,n.NL)();return(0,l.D)({mutationFn:async e=>{let{voteId:t,postId:s,userId:l,replyId:n}=e;return await i(t)},onMutate:async t=>{let{voteId:s,postId:l,userId:n,replyId:a}=t;await e.cancelQueries(["posts"]);let i=e.getQueryData(["posts"]);return e.setQueryData(["posts"],e=>{if(!e)return e;let t=e.data.find(e=>(null==e?void 0:e._id)===l);if(t.isShared){let e=t.votes.upvote,s=t.votes.downvote;e.includes(n)&&(t.votes.upvote=e.filter(e=>e!==n)),s.includes(n)?t.votes.downvote=s.filter(e=>e!==n):t.votes.downvote.push(n)}else{let e=t.post.votes.upvote,s=t.post.votes.downvote;e.includes(n)&&(t.post.votes.upvote=e.filter(e=>e!==n)),s.includes(n)?t.post.votes.downvote=s.filter(e=>e!==n):t.post.votes.downvote.push(n)}return e}),{previousPosts:i}}})}},90157:function(e,t,s){"use strict";s.d(t,{N$:function(){return n},n$:function(){return a},ts:function(){return i}}),s(74590);var l=s(58064);(0,l.$)("b63e47265808efc3ea5fc69ea9293a6fee888ebc");var n=(0,l.$)("91d5dfdcf6ac293628192d341327e9823fe376e8"),a=(0,l.$)("503060e5531973d03d82700dd75516d42141be35"),i=(0,l.$)("f4bcbb2e8b19e18ec91b45dc06a7508fbd1e96c1")},58823:function(e,t,s){"use strict";s.r(t),t.default={src:"/_next/static/media/toukir.02c75e71.jpg",height:954,width:960,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAgACAMBIgACEQEDEQH/xAAoAAEBAAAAAAAAAAAAAAAAAAAABQEBAQAAAAAAAAAAAAAAAAAAAwT/2gAMAwEAAhADEAAAALweb//EAB4QAAEDBAMAAAAAAAAAAAAAAAIDBAYAARETFEFi/9oACAEBAAE/AHMrVRkDdrxVNdx1Fk+z81//xAAaEQACAgMAAAAAAAAAAAAAAAABAgASIjFh/9oACAECAQE/AAEs+A32f//EABsRAAEEAwAAAAAAAAAAAAAAAAEAAgMhIiOh/9oACAEDAQE/AHGQtj2OGN0L4v/Z",blurWidth:8,blurHeight:8}}},function(e){e.O(0,[742,452,706,422,699,240,70,394,173,91,798,689,971,23,744],function(){return e(e.s=93080)}),_N_E=e.O()}]);